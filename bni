#!/usr/bin/env ruby

require_relative 'bootstrap_ar'
require_relative 'GetCharacter'

# ARGV = [add, foo]
command = ARGV[0]

if command == "add"
  character_name = ARGV[1]
  character = Character.new(name: character_name)
  if character.save
    puts "Success!"
  else
    puts "Failure: #{character.errors.full_messages.join(", ")}"
  end
elsif command == "list"
  characters = Character.all
  characters.each_with_index do |character, i|
    puts "#{i+1}. #{character.name}"
  end
elsif command == "remove"
  project_name = ARGV[1]
  matching_projects = Project.where(name: project_name).all
  matching_projects.each do |project|
    project.destroy
  end
else
  name = ARGV[0]
  server = ARGV[1]
  output = GetCharacter.new(name, server)
  output.print_character
end
